---
import { getLangaugeLabel } from "@lib/locale";

export interface Props {
  frontmatter: { [key: string]: any };

  title?: string;
  lang?: string;
  tags?: string[];
  publishedAt?: string;
  updatedAt?: string;
}

const {
  title,
  lang = "ja",
  tags = [],
  publishedAt,
  updatedAt,
  frontmatter,
} = Astro.props;
---

<header post-header>
  <h1 id={frontmatter.title}>{frontmatter.title}</h1>

  <section tag-list>
    {frontmatter.tags.map((tag) => <a href={`/blog?tag=${tag}`}>{tag}</a>)}
  </section>

  <section post-detail>
    <p>{getLangaugeLabel(frontmatter.lang)}</p>
    <time published-at datetime={frontmatter.published_at || "0000-00-00"}
      >{frontmatter.published_at || "Hidden post"}</time
    >
    <time updated-at datetime={frontmatter.updated_at || "9999-99-99"}>{frontmatter.updated_at || "Not updated"}</time>
  </section>
</header>

<style lang="stylus">
  @import "../../../styles/api.styl"

  header[post-header]
    margin 3rem 0

    h1
      margin 3rem 0
      sans(3rem)
      text-align center

    section[tag-list]
      flex(_gap: 1rem)
      justify-content center
      sans(1.5rem)

    section[post-detail]
      flex(_gap: 1rem)
      justify-content center
      p, time
        sans(1.2rem)
</style>
